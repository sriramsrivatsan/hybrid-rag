[supervisord]
nodaemon=true   ; Keeps supervisor running in the foreground (useful for Docker containers)

[program:fastapi]
command=uvicorn chat_restapi.router:app --host 127.0.0.1 --port 8000  ; Or whatever the original module:app and port is
directory=/Hybrid-Search-RAG/chat_restapi
autostart=true      ; Start the service automatically
autorestart=true    ; Restart the service if it crashes
stderr_logfile=/var/log/fastapi.err.log    ; Redirect stderr to a file
stdout_logfile=/var/log/fastapi.out.log    ; Redirect stdout to a file
environment=PYTHONUNBUFFERED=1             ; Set environment variables (optional)

[program:streamlit]
command=streamlit run chat_streamlit_app/app.py --server.port %(ENV_PORT)s --server.address 0.0.0.0 --server.headless true --server.enableCORS false --server.enableXsrfProtection false
directory=/Hybrid-Search-RAG/chat_streamlit_app
autostart=true         ; Start Streamlit automatically
autorestart=true       ; Restart Streamlit if it crashes
stderr_logfile=/var/log/streamlit.err.log        ; Redirect stderr to a file
stdout_logfile=/var/log/streamlit.out.log        ; Redirect stdout to a file
environment=PYTHONUNBUFFERED=1                  ; Set environment variables (optional)
